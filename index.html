<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AcousticDoodler - Interactive Music Learning Tool</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body data-theme="dark">
    <div id="app">
      <!-- Row 1: App Title + Instrument Navigation + Top Controls -->
      <div class="row-one">
        <div class="app-title-section">
          <div class="app-title">AcousticDoodler</div>
        </div>

        <div class="instrument-nav">
          <button class="instrument-button active" data-instrument="guitar">
            Guitar
          </button>
          <button class="instrument-button" data-instrument="ukulele">
            Ukulele
          </button>
          <button class="instrument-button" data-instrument="mandolin">
            Mandolin
          </button>
        </div>

        <div class="top-controls">
          <button id="tunerButton">Tuner</button>
          <button id="themeToggle" class="theme-toggle">
            <span id="themeText">Light/Dark</span>
            <div class="toggle-switch">
              <div class="toggle-circle"></div>
            </div>
          </button>
        </div>
      </div>

      <!-- Row 2: Tab Navigation + Audio Control + Volume Controls -->
      <div class="row-two">
        <div class="tab-navigation">
          <button class="tab-button active" data-tab="scales">Scales</button>
          <button class="tab-button" data-tab="chords">Chord Chart</button>
        </div>

        <div class="audio-control">
          <button id="initAudioBtn">Activate Audio</button>
        </div>

        <div class="volume-controls">
          <div class="volume-group">
            <span class="volume-label">Volume</span>
            <input
              type="range"
              id="masterVolumeSlider"
              class="slider"
              min="0"
              max="100"
              value="50"
            />
            <span class="volume-value" id="masterVolumeValue">50%</span>
          </div>
          <div class="volume-group">
            <span class="volume-label">Note Duration</span>
            <input
              type="range"
              id="noteDurationSlider"
              class="slider"
              min="100"
              max="2000"
              value="500"
            />
            <span class="volume-value" id="noteDurationValue">0.5 sec</span>
          </div>
        </div>
      </div>

      <!-- Row 3: Action Buttons + Control Selects + Tempo -->
      <div class="row-three">
        <div class="action-buttons">
          <button id="byPositionBtn" class="position-button active">
            By Position
          </button>
          <button id="playFullNeckBtn" class="full-neck-button">
            Full Neck
          </button>
        </div>

        <div class="control-selects">
          <button id="playButton" class="play-button" disabled>
            <svg class="play-icon" id="playIconSvg" viewBox="0 0 24 24">
              <polygon points="5,3 19,12 5,21"></polygon>
            </svg>
            <svg class="play-icon hidden" id="pauseIconSvg" viewBox="0 0 24 24">
              <rect x="6" y="4" width="4" height="16"></rect>
              <rect x="14" y="4" width="4" height="16"></rect>
            </svg>
            <span id="playIcon">PLAY</span>
            <span class="play-arrow">‚ñ∫</span>
          </button>
          <select id="scaleSelect" class="control-select">
            <option value="major">Scale Type</option>
            <option value="major">Major</option>
            <option value="minor">Natural Minor</option>
            <option value="pentatonicMajor">Pentatonic Major</option>
            <option value="pentatonicMinor">Pentatonic Minor</option>
            <option value="blues">Blues</option>
            <option value="dorian">Dorian</option>
            <option value="mixolydian">Mixolydian</option>
            <option value="lydian">Lydian</option>
          </select>

          <select id="keySelect" class="control-select">
            <option value="C">Key</option>
            <option value="C">C</option>
            <option value="C#">C#</option>
            <option value="D">D</option>
            <option value="D#">D#</option>
            <option value="E">E</option>
            <option value="F">F</option>
            <option value="F#">F#</option>
            <option value="G">G</option>
            <option value="G#">G#</option>
            <option value="A">A</option>
            <option value="A#">A#</option>
            <option value="B">B</option>
          </select>

          <select id="patternSelect" class="control-select">
            <option value="0">Position 1 (root)</option>
          </select>
        </div>

        <div class="tempo-control">
          <span class="tempo-label">Tempo</span>
          <input
            type="range"
            id="tempoSlider"
            class="slider"
            min="60"
            max="300"
            value="120"
          />
          <span class="tempo-value" id="tempoValue">120bpm</span>
        </div>
      </div>

      <!-- Main Content Area -->
      <div class="main-content">
        <!-- Tab Content -->
        <div id="scales-tab" class="tab-content active">
          <!-- Fretboard Section -->
          <div class="fretboard-section">
            <div class="fretboard">
              <div class="fretboard-container">
                <div id="strings" class="strings">
                  <!-- String elements will be generated by JavaScript -->
                </div>
                <div class="fret-numbers">
                  <div class="fret-number-spacer"></div>
                  <div class="fret-number">1</div>
                  <div class="fret-number">2</div>
                  <div class="fret-number">3</div>
                  <div class="fret-number">4</div>
                  <div class="fret-number">5</div>
                  <div class="fret-number">6</div>
                  <div class="fret-number">7</div>
                  <div class="fret-number">8</div>
                  <div class="fret-number">9</div>
                  <div class="fret-number">10</div>
                  <div class="fret-number">11</div>
                  <div class="fret-number">12</div>
                </div>
              </div>
            </div>

            <!-- Fretboard Key -->
            <div class="fretboard-key">
              <h3>Fretboard Key</h3>
              <div class="legend">
                <div class="legend-item">
                  <div class="legend-color legend-root"></div>
                  <span>Root Notes <span id="legendRoot">C</span></span>
                </div>
                <div class="legend-item">
                  <div class="legend-color legend-pattern"></div>
                  <span>Pattern Notes</span>
                </div>
                <div class="legend-item">
                  <div class="legend-color legend-scale"></div>
                  <span>Other Scale Notes</span>
                </div>
                <div class="legend-item">
                  <div class="legend-color legend-playing"></div>
                  <span>Currently Playing Notes</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Scale Information -->
          <div id="infoPanel" class="info-panel">
            <h2 id="infoTitle" class="info-title">C Major Scale</h2>
            <p id="infoText" class="info-text">
              The major scale is the foundation of Western music. It has a
              bright, happy sound and is used in countless songs across all
              genres.
            </p>
            <div class="info-notes">
              <span class="info-label">Scale notes: </span>
              <span id="scaleNotes" class="scale-notes"
                >C - D - E - F - G - A - B</span
              >
            </div>
          </div>

          <!-- Practice Tips -->
          <div class="tips">
            <h2 class="tips-title">Practice Tips</h2>
            <div class="tips-grid" id="tipsGrid">
              <!-- Tips will be generated by JavaScript -->
            </div>
          </div>
        </div>

        <!-- Chords Tab Content -->
        <div id="chords-tab" class="tab-content">
          <div class="chord-search">
            <input
              type="text"
              id="chordSearchInput"
              class="search-input"
              placeholder="Search chords (e.g., C, Am, F7, Bm)..."
            />
          </div>
          <div id="chordGrid" class="chord-grid">
            <!-- Chord cards will be generated by JavaScript -->
          </div>
        </div>
      </div>
    </div>

    <!-- Tuner Modal -->
    <div id="tunerModal" class="tuner-modal hidden">
      <div class="tuner-overlay" id="tunerOverlay"></div>
      <div class="tuner-content">
        <div class="tuner-header">
          <h2 class="tuner-title">üéµ Instrument Tuner</h2>
          <button id="closeTunerBtn" class="close-tuner-btn">‚úï</button>
        </div>

        <div class="tuner-status">
          <div id="tunerStatusText" class="tuner-status-text">
            Click "Start Tuner" to begin
          </div>
          <button id="startTunerBtn" class="start-tuner-btn">
            üé§ Start Tuner
          </button>
          <button id="stopTunerBtn" class="stop-tuner-btn hidden">
            ‚èπ Stop Tuner
          </button>
        </div>

        <div class="tuning-display">
          <div class="current-note">
            <div class="note-display" id="noteDisplay">--</div>
            <div class="frequency-display" id="frequencyDisplay">-- Hz</div>
          </div>

          <div class="tuning-meter">
            <div class="meter-background">
              <div class="meter-needle" id="tuningNeedle"></div>
            </div>
            <div class="meter-markers">
              <div class="marker flat">‚ô≠</div>
              <div class="marker center">‚ô™</div>
              <div class="marker sharp">‚ôØ</div>
            </div>
          </div>
        </div>

        <div class="string-targets">
          <h3 class="targets-title">Target Notes</h3>
          <div id="stringTargets" class="targets-grid">
            <!-- String targets will be generated by JavaScript -->
          </div>
        </div>

        <div class="tuner-instructions">
          <p>üéØ Pluck a string and watch the tuner respond</p>
          <p>
            üéµ The needle will show if you're flat (‚ô≠), sharp (‚ôØ), or in tune
            (‚ô™)
          </p>
          <p>üîä Adjust your tuning pegs until the needle is centered</p>
        </div>
      </div>
    </div>

    <!-- Hidden elements for JavaScript compatibility -->
    <div class="js-compatibility hidden">
      <!-- Original header elements -->
      <div class="header">
        <h1 class="title">AcousticDoodler</h1>
        <div class="instrument-title" id="instrumentTitle">Guitar</div>
        <p class="subtitle">
          Interactive fretboard patterns, chord charts, and audio playback
        </p>
      </div>

      <!-- Audio status -->
      <div id="audioStatus" class="audio-status">
        Click "Activate Audio" to enable sound playback
      </div>

      <!-- Original control elements -->
      <div class="controls-grid">
        <div class="control-group">
          <label class="label">Scale Type</label>
        </div>
        <div class="control-group">
          <label class="label">Key</label>
        </div>
        <div class="control-group">
          <label class="label">Pattern</label>
        </div>
        <div class="control-group">
          <label class="label">Tempo</label>
        </div>
      </div>

      <!-- Original button elements -->
      <div class="button-container">
        <div class="button">
          <span id="playText">Play Pattern</span>
        </div>
        <div class="button-secondary"></div>
        <div class="button-tertiary">
          <span id="fullNeckText">Full Neck Scale</span>
          <span id="fullNeckIcon">üé∏</span>
        </div>
        <button id="infoButton" class="button-secondary">
          Scale Info <span id="infoIcon">‚ñº</span>
        </button>
      </div>

      <!-- Original fretboard title -->
      <h2 id="fretboardTitle" class="fretboard-title">
        Fretboard - Pattern 1 (Root)
      </h2>

      <!-- Theme icon -->
      <span id="themeIcon">‚òÄÔ∏è</span>
    </div>

    <!-- Modular JavaScript Components -->
    <script src="js/AudioSynth.js"></script>
    <script src="js/InstrumentData.js"></script>
    <script src="js/FretboardRenderer.js"></script>
    <script src="js/ChordRenderer.js"></script>
    <script src="js/Tuner.js"></script>
    <script src="js/AudioPlayer.js"></script>
    <script src="js/UIManager.js"></script>
    <script src="js/App.js"></script>
  </body>
</html>
